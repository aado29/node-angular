{"version":3,"sources":["app.min.js"],"names":["config","$routeProvider","$locationProvider","when","templateUrl","controller","controllerAs","html5Mode","run","$rootScope","$location","authentication","$on","event","nextRoute","currentRoute","path","isLoggedIn","angular","module","homeCtrl","console","log","profileCtrl","$routeParams","meanData","vm","this","user","currentUser","_id","id","getProfile","success","data","error","e","$inject","registerCtrl","credentials","name","email","password","onSubmit","register","err","then","loginCtrl","login","$http","$window","saveToken","token","localStorage","getToken","payload","split","atob","JSON","parse","exp","Date","now","post","logout","removeItem","service","get","headers","Authorization","navigationCtrl","navigation","restrict","directive"],"mappings":"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","file":"app.min.js","sourcesContent":["(function () {\n\n\tangular.module('meanApp', ['ngRoute']);\n\n\tfunction config ($routeProvider, $locationProvider) {\n\t\t$routeProvider\n\t\t\t.when('/', {\n\t\t\t\ttemplateUrl: 'home/home.view.html',\n\t\t\t\tcontroller: 'homeCtrl',\n\t\t\t\tcontrollerAs: 'vm'\n\t\t\t})\n\t\t\t.when('/register', {\n\t\t\t\ttemplateUrl: '/auth/register/register.view.html',\n\t\t\t\tcontroller: 'registerCtrl',\n\t\t\t\tcontrollerAs: 'vm'\n\t\t\t})\n\t\t\t.when('/login', {\n\t\t\t\ttemplateUrl: '/auth/login/login.view.html',\n\t\t\t\tcontroller: 'loginCtrl',\n\t\t\t\tcontrollerAs: 'vm'\n\t\t\t})\n\t\t\t.when('/profile', {\n\t\t\t\ttemplateUrl: '/profile/profile.view.html',\n\t\t\t\tcontroller: 'profileCtrl',\n\t\t\t\tcontrollerAs: 'vm'\n\t\t\t})\n\t\t\t.when('/profile/:id', {\n\t\t\t\ttemplateUrl: '/profile/profile.view.html',\n\t\t\t\tcontroller: 'profileCtrl',\n\t\t\t\tcontrollerAs: 'vm'\n\t\t\t});\n\t\t\t// .otherwise({redirectTo: '/'});\n\n\t\t// use the HTML5 History API\n\t\t$locationProvider.html5Mode(true);\n\t}\n\n\tfunction run($rootScope, $location, authentication) {\n\t\t$rootScope.$on('$routeChangeStart', function(event, nextRoute, currentRoute) {\n\t\t\tif ($location.path() === '/profile' && !authentication.isLoggedIn()) {\n\t\t\t\t//$location.path('/');\n\t\t\t}\n\t\t});\n\t}\n\t\n\tangular\n\t\t.module('meanApp')\n\t\t.config(['$routeProvider', '$locationProvider', config])\n\t\t.run(['$rootScope', '$location', 'authentication', run]);\n\n})();\n(function() {\n  \n  angular\n    .module('meanApp')\n    .controller('homeCtrl', homeCtrl);\n\n    function homeCtrl () {\n      console.log('Home controller is running');\n    }\n\n})();\n(function() {\n\t\n\tangular\n\t\t.module('meanApp')\n\t\t.controller('profileCtrl', profileCtrl);\n\n\tprofileCtrl.$inject = ['$routeParams', '$location', 'meanData', 'authentication'];\n\tfunction profileCtrl($routeParams, $location, meanData, authentication) {\n\t\tvar vm = this;\n\n\t\tvm.user = {};\n\n\t\tif (authentication.isLoggedIn() && authentication.currentUser()._id === $routeParams.id)\n\t\t\t$location.path('/profile');\n\n\t\tif (!authentication.isLoggedIn())\n\t\t\t$location.path('/');\n\t\telse \n\t\t\tmeanData.getProfile($routeParams.id)\n\t\t\t\t.success(function(data) {\n\t\t\t\t\tvm.user = data;\n\t\t\t\t\tconsole.log(data);\n\t\t\t\t})\n\t\t\t\t.error(function(e) {\n\t\t\t\t\tconsole.log(e);\n\t\t\t\t});\n\t}\n\n})();\n(function () {\n\n  angular\n    .module('meanApp')\n    .controller('registerCtrl', registerCtrl);\n\n  registerCtrl.$inject = ['$location', 'authentication'];\n  function registerCtrl($location, authentication) {\n    var vm = this;\n\n    vm.credentials = {\n      name : \"\",\n      email : \"\",\n      password : \"\"\n    };\n\n    vm.onSubmit = function () {\n      console.log('Submitting registration');\n      authentication\n        .register(vm.credentials)\n        .error(function(err){\n          console.log(err);\n        })\n        .then(function(){\n          $location.path('profile');\n        });\n    };\n\n  }\n\n})();\n(function () {\n\n\tangular\n\t.module('meanApp')\n\t.controller('loginCtrl', loginCtrl);\n\n\tloginCtrl.$inject = ['$location', 'authentication'];\n\tfunction loginCtrl($location, authentication) {\n\t\tvar vm = this;\n\n\t\tvm.credentials = {\n\t\t\temail : \"\",\n\t\t\tpassword : \"\"\n\t\t};\n\n\t\tvm.onSubmit = function() {\n\t\t\tauthentication\n\t\t\t\t.login(vm.credentials)\n\t\t\t\t.error(function(err) {\n\t\t\t\t\tconsole.log(err);\n\t\t\t\t})\n\t\t\t\t.then(function() {\n\t\t\t\t\t$location.path('profile');\n\t\t\t\t});\n\t\t};\n\n\t}\n\n})();\n(function () {\n\n\tangular\n\t\t.module('meanApp')\n\t\t.service('authentication', authentication);\n\n\tauthentication.$inject = ['$http', '$window'];\n\tfunction authentication ($http, $window) {\n\n\t\tvar saveToken = function (token) {\n\t\t\t$window.localStorage['mean-token'] = token;\n\t\t};\n\n\t\tvar getToken = function () {\n\t\t\treturn $window.localStorage['mean-token'];\n\t\t};\n\n\t\tvar isLoggedIn = function() {\n\t\t\tvar token = getToken();\n\t\t\tvar payload;\n\n\t\t\tif(token){\n\t\t\t\tpayload = token.split('.')[1];\n\t\t\t\tpayload = $window.atob(payload);\n\t\t\t\tpayload = JSON.parse(payload);\n\n\t\t\t\treturn payload.exp > Date.now() / 1000;\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t};\n\n\t\tvar currentUser = function() {\n\t\t\tif(isLoggedIn()){\n\t\t\t\tvar token = getToken();\n\t\t\t\tvar payload = token.split('.')[1];\n\t\t\t\tpayload = $window.atob(payload);\n\t\t\t\tpayload = JSON.parse(payload);\n\t\t\t\treturn {\n\t\t\t\t\t_id: payload._id,\n\t\t\t\t\temail: payload.email,\n\t\t\t\t\tname: payload.name\n\t\t\t\t};\n\t\t\t}\n\t\t};\n\n\t\tvar register = function(user) {\n\t\t\treturn $http\n\t\t\t\t.post('/api/auth/register', user)\n\t\t\t\t.success(function(data) {\n\t\t\t\t\tsaveToken(data.token);\n\t\t\t\t});\n\t\t};\n\n\t\tvar login = function(user) {\n\t\t\treturn $http\n\t\t\t\t.post('/api/auth/local', user)\n\t\t\t\t.success(function(data) {\n\t\t\t\t\tsaveToken(data.token);\n\t\t\t\t});\n\t\t};\n\n\t\tvar logout = function() {\n\t\t\t$window.localStorage.removeItem('mean-token');\n\t\t};\n\n\t\treturn {\n\t\t\tcurrentUser : currentUser,\n\t\t\tsaveToken : saveToken,\n\t\t\tgetToken : getToken,\n\t\t\tisLoggedIn : isLoggedIn,\n\t\t\tregister : register,\n\t\t\tlogin : login,\n\t\t\tlogout : logout\n\t\t};\n\t}\n\n\n})();\n(function() {\n\n\tangular\n\t\t.module('meanApp')\n\t\t.service('meanData', meanData);\n\n\tmeanData.$inject = ['$http', 'authentication'];\n\tfunction meanData ($http, authentication) {\n\n\t\tvar getProfile = function(id) {\n\t\t\tif (!id)\n\t\t\t\treturn $http.get('/api/user/current', {\n\t\t\t\t\theaders: {\n\t\t\t\t\t\tAuthorization: 'Bearer '+ authentication.getToken()\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\telse\n\t\t\t\treturn $http.get('/api/user/' + id);\n\t\t\t\n\t\t};\n\n\t\treturn {\n\t\t\tgetProfile: getProfile\n\t\t};\n\t}\n\n})();\n(function () {\n\n\tangular\n\t\t.module('meanApp')\n\t\t.controller('navigationCtrl', navigationCtrl);\n\n\tnavigationCtrl.$inject = ['$location', 'authentication'];\n\tfunction navigationCtrl($location, authentication) {\n\t\tvar vm = this;\n\n\t\tvm.isLoggedIn = authentication.isLoggedIn();\n\n\t\tvm.currentUser = authentication.currentUser();\n\n\t\tvm.logout = function() {\n\t\t\tauthentication.logout();\n\t\t\t$location.path('/');\n\t\t}\n\n\t}\n\n})();\n(function () {\n\n  angular\n    .module('meanApp')\n    .directive('navigation', navigation);\n\n  function navigation () {\n    return {\n      restrict: 'EA',\n      templateUrl: '/common/directives/navigation/navigation.template.html',\n      controller: 'navigationCtrl as navvm'\n    };\n  }\n\n})();"],"sourceRoot":"/source/"}